%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#e3f2fd', 'primaryTextColor': '#1a1a1a', 'primaryBorderColor': '#1976d2', 'lineColor': '#1976d2'}}}%%
flowchart LR
    subgraph Pipeline["MLOps Pipeline"]
        direction LR
        A["ðŸ“Š 01-Feast<br/>Features"] --> B["ðŸŽ¯ 02-Training<br/>Model"] --> C["ðŸš€ 03-Inference<br/>Serving"]
    end
    
    subgraph Infra["Infrastructure"]
        direction TB
        Ray["âš¡ Ray Cluster"]
        PG[(ðŸ˜ PostgreSQL)]
        PVC[("ðŸ’¾ Shared PVC")]
        MLflow["ðŸ“ˆ MLflow"]
    end
    
    A -->|materialize| Ray
    Ray -->|features| PG
    A -->|parquet| PVC
    
    B -->|metrics| MLflow
    B -->|model.pt| PVC
    PVC -->|features| B
    
    C -->|load model| PVC
    PG -->|online features| C
    
    Client["ðŸŒ Client"] -->|POST /predict| C
    
    style Pipeline fill:#e8f5e9,stroke:#388e3c
    style Infra fill:#fff3e0,stroke:#f57c00
